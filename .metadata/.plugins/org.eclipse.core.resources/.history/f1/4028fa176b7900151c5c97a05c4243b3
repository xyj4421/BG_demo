package com.action;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import net.sf.json.JSONObject;

import com.domain.Businesselements;
import com.opensymphony.xwork2.Action;
import com.service.impl.ElementsMgrImpl;

public class QueryAllElements implements Action {


	private List allElements;
	private Integer id;
	private String name;
	private Boolean isRequired;
	public String getName() {
		return name;
	}


	public void setName(String name) {
		this.name = name;
	}


	public Boolean getIsRequired() {
		return isRequired;
	}


	public void setIsRequired(Boolean isRequired) {
		this.isRequired = isRequired;
	}

	public String delete() {
		System.out.println("id:"+getId());

		ElementsMgrImpl impl=new ElementsMgrImpl();
		
		impl.delete(getId());
		return "success";
	}
	public void insert() {
//		System.out.println("name:"+getName());
//		System.out.println("isRequired:"+getIsRequired());
		System.out.println("------------------------------新增业务要素");
		if(getIsRequired()==null){
			setIsRequired(false);
		}else{
			setIsRequired(true);
		}
		
		ElementsMgrImpl impl=new ElementsMgrImpl();
		Businesselements e = new Businesselements();
		e.setIsRequired(getIsRequired());
		e.setName(getName());
		System.out.println("要素名称:"+e.getName());
		System.out.println("是否必填:"+e.getIsRequired());
		
		impl.insertElements(e);
		
//		Map<String,Object> result=new HashMap();
//		result.put("success", true);
//		result.put("message", "操作成功");
//		JSONObject json=JSONObject.fromObject(result);
//		return SUCCESS;
	}
	
	
	public String queryAll() throws Exception {
		// TODO Auto-generated method stub
		ElementsMgrImpl impl=new ElementsMgrImpl();
		allElements=impl.queryAll();
//		setAllElements(impl.queryAll());
//		System.out.println("query action is called");
//		System.out.println("there is "+allElements.size()+" elements.");
//		map.put("row",allElements);
//		JSONObject json=JSONObject.fromObject(map);
//		ActionContext.getContext().getValueStack().set("json", json);
//		System.out.println(json.toString());
		return SUCCESS;
	}
	public List getAllElements() {
		return allElements;
	}
	public void setAllElements(List allElements) {
		this.allElements = allElements;
	}
	@Override
	public String execute() throws Exception {
		// TODO Auto-generated method stub
		return null;
	}


	public Integer getId() {
		return id;
	}


	public void setId(Integer id) {
		this.id = id;
	}

}
